<!DOCTYPE html>
<html lang="en"><head>
<link href="../../favicon.ico" rel="icon">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-93c6896557d5f42838538b14f49b9a4e.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.25">

  <meta name="author" content="Trent Nelson">
  <meta name="dcterms.date" content="2025-06-22">
  <title>Trent Nelson – Git Carpentry</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2; background-color: #333333; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #ff79c6; } /* Annotation */
    code span.at { color: #ffe4b5; } /* Attribute */
    code span.bn { color: #bd93f9; } /* BaseN */
    code span.bu { color: #dda0dd; } /* BuiltIn */
    code span.cf { color: #ff79c6; } /* ControlFlow */
    code span.ch { color: #f1fa8c; } /* Char */
    code span.cn { color: #bd93f9; font-weight: bold; } /* Constant */
    code span.co { color: #7ec699; } /* Comment */
    code span.cv { color: #8be9fd; } /* CommentVar */
    code span.do { color: #ffb86c; } /* Documentation */
    code span.dt { color: #afeeee; } /* DataType */
    code span.dv { color: #bd93f9; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #b0e0e6; } /* Extension */
    code span.fl { color: #bd93f9; } /* Float */
    code span.fu { color: #87ceeb; } /* Function */
    code span.im { color: #ff79c6; } /* Import */
    code span.in { color: #f1fa8c; } /* Information */
    code span.kw { color: #ff79c6; } /* Keyword */
    code span.op { color: #ffefd5; } /* Operator */
    code span.ot { color: #c4ed54; } /* Other */
    code span.pp { color: #ffe4b5; } /* Preprocessor */
    code span.re { color: #8be9fd; } /* RegionMarker */
    code span.sc { color: #ff79c6; } /* SpecialChar */
    code span.ss { color: #f1fa8c; } /* SpecialString */
    code span.st { color: #db7093; } /* String */
    code span.va { color: #98fb98; } /* Variable */
    code span.vs { color: #ff6347; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-b034ff0ead49eadb7d97b9150cea9e89.css">
  <link rel="stylesheet" href="../../styles.css">
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-8RPR4XKPEW"></script>

  <script type="text/javascript">

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-8RPR4XKPEW', { 'anonymize_ip': false});
  </script>
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-bg-video-ctrl/bg-video-ctrl.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
<meta property="og:title" content="Git Carpentry – Trent Nelson">
<meta property="og:description" content="Crafting PRs Reviewers Will Love">
<meta property="og:image" content="https://trent.me/decks/git-carpentry/images/git-carpentry.png">
<meta property="og:site_name" content="Trent Nelson">
<meta property="og:image:height" content="1024">
<meta property="og:image:width" content="1536">
<meta name="twitter:title" content="Git Carpentry – Trent Nelson">
<meta name="twitter:description" content="Crafting PRs Reviewers Will Love">
<meta name="twitter:image" content="https://trent.me/decks/git-carpentry/images/git-carpentry.png">
<meta name="twitter:image-height" content="1024">
<meta name="twitter:image-width" content="1536">
<meta name="twitter:card" content="summary_large_image">
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="../../images/background.jpg" data-background-size="cover" class="quarto-title-block center">
  <h1 class="title">Git Carpentry</h1>
  <p class="subtitle">Crafting PRs Reviewers Will Love</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Trent Nelson 
</div>
</div>
</div>

  <p class="date">2025-06-22</p>
</section>
<section>
<section id="introduction" class="title-slide slide level1 center">
<h1>Introduction</h1>

</section>
<section id="purpose-of-this-deck" class="slide level2">
<h2>Purpose Of This Deck</h2>
<ul>
<li>Messy WIP-commit branches are great… for the developer.</li>
<li>Horrendous for reviewers.
<ul>
<li>Horrendousness scales proportionally to size of PR (lines/files changed).</li>
<li>Thoughtfully-crafted topical commits are much friendlier to reviewers.</li>
</ul></li>
<li>This deck captures the (opinionated) techiques I use to go from messy WIP-commit branches to PRs geared toward making reviewers’ lives easier.</li>
</ul>
</section>
<section id="on-being-opinionated" class="slide level2">
<h2>On Being Opinionated</h2>
<ul>
<li>Almost everything presented is done a certain way because I’ve been bitten by doing it different ways.</li>
<li>So this deck’s narrative is very prescriptive: <em>“Do it like this.”</em></li>
<li>Feel free to not do it like that if you prefer an alternate approach.</li>
</ul>
</section>
<section id="how-burdensome-is-this-going-to-be" class="slide level2">
<h2>How Burdensome Is This Going To Be?</h2>
<ul>
<li>If this was a pain to do, I wouldn’t do it.
<ul>
<li>And my annoyance threshold is pretty low.</li>
</ul></li>
<li>The time it takes to craft a new topical PR is proportional to PR complexity.</li>
<li>I’ve never had it take more than a single <em>“sitting”</em> (i.e.&nbsp;an uninterrupted morning/afternoon/evening hack session)…</li>
<li>Biggest to date: huge feature branch hacked on by myself and four other developers over the course of ~3 weeks (~90 messy commits, about 20,000 lines changed): took about 3.5-4 hours and some banging electro to craft a new reviewer-friendly branch of about ~10 commits (including accurate developer attribution). Saved tens of hours of reviewers’ time.</li>
</ul>
</section>
<section id="other-benefits" class="slide level2">
<h2>Other Benefits?</h2>
<ul>
<li>I always use this approach for non-trivial PRs:
<ul>
<li>Half the battle of any PR is getting people to review it, so making it as easy as possible for reviewers yields responsive approvals.</li>
<li>Additionally, I almost always catch small bugs or think of improvements whilst going through the rebasing process…</li>
<li>The end result is always better quality code.</li>
</ul></li>
</ul>
</section>
<section id="tips-for-interacting-with-this-deck" class="slide level2">
<h2>Tips For Interacting With This Deck</h2>
<ul>
<li>Intent of this deck is to be useful as a reference you can come back to.</li>
<li><a href="https://trent.me/decks/git-carpentry">https://trent.me/decks/git-carpentry</a>
<ul>
<li><a href="https://github.com/tpn/website/blob/main/decks/git-carpentry/index.qmd">GitHub source for this deck</a></li>
</ul></li>
<li><code>m</code>: Side Menu with TOC</li>
<li><code>o</code>: Overview Mode
<ul>
<li>This deck uses vertical and horizontal orientation, so overview mode is helpful for quickly navigating to the area you’re interested in.</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="pre-requisites" class="title-slide slide level1 center">
<h1>Pre-requisites</h1>
<aside class="notes">
<p>I use a lot of aliases and shortcuts in the examples. The following slides capture the applicable configuration settings.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="gitconfig" class="slide level2">
<h2>~/.gitconfig</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a></a><span class="co"># When rerere is enabled (rerere.enabled = true), Git records how you</span></span>
<span id="cb1-2"><a></a><span class="co"># resolve merge conflicts and reuses those resolutions in future merges,</span></span>
<span id="cb1-3"><a></a><span class="co"># automating the conflict resolution process for identical or similar</span></span>
<span id="cb1-4"><a></a><span class="co"># conflicts. This feature is particularly useful in long-running branches</span></span>
<span id="cb1-5"><a></a><span class="co"># to minimize manual conflict resolution effort.</span></span>
<span id="cb1-6"><a></a><span class="ex">[rerere]</span></span>
<span id="cb1-7"><a></a><span class="ex">enabled</span> = true</span>
<span id="cb1-8"><a></a></span>
<span id="cb1-9"><a></a><span class="co"># When rebase.autoStash is enabled (rebase.autoStash = true), Git</span></span>
<span id="cb1-10"><a></a><span class="co"># automatically stashes any local changes before a rebase operation and</span></span>
<span id="cb1-11"><a></a><span class="co"># reapplies them after the rebase completes, facilitating a smoother</span></span>
<span id="cb1-12"><a></a><span class="co"># rebase process for working directories with uncommitted changes.</span></span>
<span id="cb1-13"><a></a><span class="ex">[rebase]</span></span>
<span id="cb1-14"><a></a><span class="ex">autoStash</span> = true</span>
<span id="cb1-15"><a></a></span>
<span id="cb1-16"><a></a><span class="co"># Other useful defaults:</span></span>
<span id="cb1-17"><a></a><span class="ex">[init]</span></span>
<span id="cb1-18"><a></a><span class="ex">defaultBranch</span> = main</span>
<span id="cb1-19"><a></a><span class="ex">[push]</span></span>
<span id="cb1-20"><a></a><span class="ex">default</span> = simple</span>
<span id="cb1-21"><a></a><span class="ex">[checkout]</span></span>
<span id="cb1-22"><a></a><span class="ex">defaultRemote</span> = origin</span>
<span id="cb1-23"><a></a></span>
<span id="cb1-24"><a></a><span class="co"># If you have Beyond Compare installed (https://www.scootersoftware.com/),</span></span>
<span id="cb1-25"><a></a><span class="co"># use these settings to configure it as your default mergetool:</span></span>
<span id="cb1-26"><a></a><span class="ex">[merge]</span></span>
<span id="cb1-27"><a></a><span class="ex">tool</span> = bc3</span>
<span id="cb1-28"><a></a><span class="ex">[mergetool</span> <span class="st">"bc3"</span>]</span>
<span id="cb1-29"><a></a><span class="ex">cmd</span> = /usr/bin/bcompare <span class="va">$LOCAL</span> <span class="va">$REMOTE</span> <span class="va">$BASE</span> <span class="va">$MERGED</span></span>
<span id="cb1-30"><a></a></span>
<span id="cb1-31"><a></a><span class="co"># Some handy aliases.</span></span>
<span id="cb1-32"><a></a><span class="ex">[alias]</span></span>
<span id="cb1-33"><a></a><span class="ex">st</span> = status</span>
<span id="cb1-34"><a></a><span class="ex">ci</span> = commit</span>
<span id="cb1-35"><a></a><span class="ex">br</span> = branch</span>
<span id="cb1-36"><a></a><span class="fu">co</span> = checkout</span>
<span id="cb1-37"><a></a><span class="fu">df</span> = diff</span>
<span id="cb1-38"><a></a><span class="fu">dc</span> = diff <span class="at">--cached</span></span>
<span id="cb1-39"><a></a><span class="ex">lg</span> = log <span class="at">-p</span></span>
<span id="cb1-40"><a></a><span class="ex">lol</span> = log <span class="at">--graph</span> <span class="at">--decorate</span> <span class="at">--pretty</span><span class="op">=</span>oneline <span class="at">--abbrev-commit</span></span>
<span id="cb1-41"><a></a><span class="ex">lola</span> = log <span class="at">--graph</span> <span class="at">--decorate</span> <span class="at">--pretty</span><span class="op">=</span>oneline <span class="at">--abbrev-commit</span> <span class="at">--all</span></span>
<span id="cb1-42"><a></a><span class="fu">ls</span> = ls-files</span>
<span id="cb1-43"><a></a></span>
<span id="cb1-44"><a></a><span class="co"># Show files ignored by git:</span></span>
<span id="cb1-45"><a></a><span class="ex">ign</span> = ls-files <span class="at">-o</span> <span class="at">-i</span> <span class="at">--exclude-standard</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="shell-aliases" class="slide level2">
<h2>Shell Aliases</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a></a><span class="bu">alias</span> gb=<span class="st">'git branch'</span></span>
<span id="cb2-2"><a></a><span class="bu">alias</span> gba=<span class="st">'gb -a'</span></span>
<span id="cb2-3"><a></a><span class="bu">alias</span> gbc=<span class="st">'gb --show-current'</span></span>
<span id="cb2-4"><a></a><span class="bu">alias</span> gss=<span class="st">'git status --untracked-files=no'</span></span>
<span id="cb2-5"><a></a><span class="bu">alias</span> gs=<span class="st">'git status'</span></span>
<span id="cb2-6"><a></a><span class="bu">alias</span> gd=<span class="st">'git diff'</span></span>
<span id="cb2-7"><a></a><span class="bu">alias</span> gdc=<span class="st">'git diff --cached'</span></span>
<span id="cb2-8"><a></a><span class="bu">alias</span> gg=<span class="st">'git grep -n'</span></span>
<span id="cb2-9"><a></a><span class="bu">alias</span> ggi=<span class="st">'git grep -ni'</span></span>
<span id="cb2-10"><a></a><span class="bu">alias</span> gds=<span class="st">'git diff --staged'</span></span>
<span id="cb2-11"><a></a><span class="bu">alias</span> gc=<span class="st">'git commit'</span></span>
<span id="cb2-12"><a></a><span class="bu">alias</span> gpr=<span class="st">"git pull --rebase"</span>                   <span class="co"># &lt;-- important!</span></span>
<span id="cb2-13"><a></a><span class="bu">alias</span> gprom=<span class="st">"git pull --rebase origin main"</span>     <span class="co"># &lt;-- important!</span></span>
<span id="cb2-14"><a></a><span class="bu">alias</span> gls=<span class="st">'git ls-files'</span></span>
<span id="cb2-15"><a></a><span class="bu">alias</span> gmb=<span class="st">'git merge-base HEAD origin main'</span>     <span class="co"># &lt;-- important!</span></span>
<span id="cb2-16"><a></a><span class="bu">alias</span> gll=<span class="st">'git log --graph --decorate --pretty=oneline --abbrev-commit'</span></span>
<span id="cb2-17"><a></a><span class="bu">alias</span> gllmb=<span class="st">'gll $(gmb)..HEAD'</span></span>
<span id="cb2-18"><a></a><span class="bu">alias</span> grib=<span class="st">'git rebase -i $(gmb)'</span>               <span class="co"># &lt;-- important!</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="github-ssh-config-aliases" class="slide level2">
<h2>GitHub SSH Config Aliases</h2>
<ul>
<li>Add the following to your <code>~/.ssh/config</code> file:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode numberSource ssh number-lines code-with-copy"><code class="sourceCode"><span id="cb3-1"><a></a>Host gh</span>
<span id="cb3-2"><a></a>    User git</span>
<span id="cb3-3"><a></a>    IdentityFile ~/.ssh/id_rsa_github</span>
<span id="cb3-4"><a></a>    HostName github.com</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="repo-clone-fork-remote-setup" class="slide level2">
<h2>Repo Clone &amp; Fork Remote Setup</h2>
<ul>
<li>Clone the upstream repo, not your fork, e.g.&nbsp;<code>git clone gh:NVIDIA/cccl</code>.</li>
<li>Add your fork as a remote (<code>tpn</code> = my fork/GH username)</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a></a><span class="fu">mkdir</span> <span class="at">-p</span> ~/src</span>
<span id="cb4-2"><a></a><span class="bu">cd</span> ~/src</span>
<span id="cb4-3"><a></a><span class="fu">git</span> clone gh:NVIDIA/cccl</span>
<span id="cb4-4"><a></a><span class="bu">cd</span> cccl</span>
<span id="cb4-5"><a></a><span class="fu">git</span> remote add tpn gh:tpn/cccl</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>This ensures your <code>main</code> is always tracking <code>NVIDIA/cccl</code>.</li>
<li>Avoids accidentally creating a branch from <code>tpn/main</code> that hasn’t been updated in 8 months.</li>
</ul>
</section></section>
<section>
<section id="getting-started" class="title-slide slide level1 center">
<h1>Getting Started</h1>

</section>
<section id="section" class="slide level2" data-background-image="images/v1-vs-v2-branches.png" data-background-size="contain" data-background-opacity="1">
<h2></h2>
</section>
<section id="following-along-at-home-1" class="slide level2">
<h2>Following Along At Home… [1]</h2>
<ul>
<li>This is a bit quirky because you have to simulate a messy WIP-commit branch that someone else authored, then rebase it into a more reviewable state.</li>
<li>In reality, you’ll be rebasing a messy WIP-commit branch you’ve already got, so you won’t need to do these initial branch setup steps.</li>
</ul>
</section>
<section id="following-along-at-home-2" class="slide level2">
<h2>Following Along At Home… [2]</h2>
<ul>
<li>Options for getting set up:
<ul>
<li>Checkout the original <em>“messy”</em> v1 branch I used during development.</li>
<li>Create a new branch, then abuse interactive rebase to make it look like the v1 branch.</li>
</ul></li>
<li>Both options start the same way:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a></a><span class="bu">cd</span> ~/src/cccl</span>
<span id="cb5-2"><a></a><span class="fu">git</span> remote add tpn gh:tpn/cccl</span>
<span id="cb5-3"><a></a><span class="fu">git</span> fetch tpn</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="side-bar-git-merge-base" class="slide level2">
<h2>Side-bar: git merge-base</h2>
<ul>
<li>When you create a branch off <code>main</code>, the <code>main</code> revision upon which your branch will be based is known as the <code>merge-base</code>.</li>
<li><code>alias gmb='git merge-base HEAD origin main'</code></li>
<li>This is the single most useful revision in rebase-oriented branch development.</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a></a><span class="ex">%</span> pwd</span>
<span id="cb6-2"><a></a><span class="ex">/home/trentn/src/cccl</span></span>
<span id="cb6-3"><a></a><span class="ex">%</span> gbc</span>
<span id="cb6-4"><a></a><span class="ex">4310-add-scan_op-support-to-cudacoop-block_scan-routines</span></span>
<span id="cb6-5"><a></a><span class="ex">%</span> gmb</span>
<span id="cb6-6"><a></a><span class="ex">071f032f650002a5159e36d13b7549fe383a5c50</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="side-bar-git-merge-base-cont." class="slide level2 scrollable">
<h2>Side-bar: git merge-base (cont.)</h2>
<ul>
<li>From aliases earlier:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a></a><span class="bu">alias</span> gll=<span class="st">'git log --graph --decorate --pretty=oneline --abbrev-commit'</span></span>
<span id="cb7-2"><a></a><span class="bu">alias</span> gllmb=<span class="st">'gll $(gmb)..HEAD'</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Git log of all changes in the branch since creation from <code>main</code>:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a></a><span class="ex">%</span> gllmb</span>
<span id="cb8-2"><a></a><span class="ex">*</span> afb1290cc <span class="er">(</span><span class="ex">HEAD</span> <span class="at">-</span><span class="op">&gt;</span> 4310-add-scan_op-support-to-cudacoop-block_scan-routines, tpn/4310-add-scan_op-support-to-cudacoop-block_scan-routines<span class="kw">)</span> <span class="ex">Improve</span> invariants.</span>
<span id="cb8-3"><a></a><span class="ex">*</span> 356514111 Tweak docstrings a bit more.</span>
<span id="cb8-4"><a></a><span class="ex">*</span> 49132575a Export <span class="kw">`</span><span class="ex">block_scan</span><span class="kw">`</span> symbol<span class="kw">;</span> <span class="cf">do</span> <span class="ex">not</span> use <span class="kw">`</span><span class="ex">ScanOp</span><span class="er">(</span><span class="st">'+'</span><span class="kw">)`</span> as default arg.</span>
<span id="cb8-5"><a></a><span class="ex">*</span> 481375f94 Remove redundant/obsolete code.</span>
<span id="cb8-6"><a></a><span class="ex">*</span> cd1467134 Vastly improve docstrings for all block_scan routines.</span>
<span id="cb8-7"><a></a><span class="ex">*</span> 8aace835d Minor cosmetic tweaks of ScanOp-related functionality.</span>
<span id="cb8-8"><a></a><span class="ex">*</span> 841fab0c8 Tweak module docstring.</span>
<span id="cb8-9"><a></a><span class="ex">*</span> 1292c4c39 Fix 2D sizes<span class="kw">;</span> <span class="ex">add</span> float64 test.</span>
<span id="cb8-10"><a></a><span class="ex">*</span> 4d7502566 Working checkpoint commit<span class="kw">;</span> <span class="ex">all</span> test_block_scan.py tests now pass!</span>
<span id="cb8-11"><a></a><span class="ex">*</span> 6adf8f575 Checkpoint commit of block scan scan op process.</span>
<span id="cb8-12"><a></a><span class="ex">*</span> 712d9e3b6 Rename DependentOperator to DependentPythonOperator.</span>
<span id="cb8-13"><a></a><span class="ex">*</span> 6900f83df Checkpoint commit of test_block_scan.py prior to o1-pro revamp.</span>
<span id="cb8-14"><a></a><span class="ex">*</span> 441f57fb0 Checkpoint commit of test_block_scan.py prior to ChatGPT o1-pro.</span>
<span id="cb8-15"><a></a><span class="ex">*</span> 0360c5167 Checkpoint commit of local _block_scan.py changes prior to test refactoring.</span>
<span id="cb8-16"><a></a><span class="ex">*</span> 0df7d0de5 Initial implementation of new tests for block_scan routines.</span>
<span id="cb8-17"><a></a><span class="ex">*</span> ddb3da6ec Relocate Complex type scaffolding to helpers.py.</span>
<span id="cb8-18"><a></a><span class="ex">*</span> da6c9a2e8 Implement exclusive_scan and inclusive_scan in block_scan module.</span>
<span id="cb8-19"><a></a><span class="ex">*</span> 155a7712f Implement ScanOp class and supporting helpers.</span>
<span id="cb8-20"><a></a><span class="ex">%</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="demo-branch-setup-option-1" class="slide level2">
<h2>Demo Branch Setup: Option 1</h2>
<ul>
<li>Checkout my <code>tpn</code> remote’s <code>4310-add-scan_op-support-to-cudacoop-block_scan-routines</code> branch directly:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a></a><span class="fu">git</span> checkout <span class="at">-b</span> <span class="dt">\</span></span>
<span id="cb9-2"><a></a>    4310-add-scan_op-support-to-cudacoop-block_scan-routines <span class="dt">\</span></span>
<span id="cb9-3"><a></a>    tpn/4310-add-scan_op-support-to-cudacoop-block_scan-routines</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="demo-branch-setup-option-2-1" class="slide level2">
<h2>Demo Branch Setup: Option 2 [1]</h2>
<ul>
<li>Pro-tip: using interactive rebase, you can make any branch look exactly like any other branch by:
<ul>
<li>Rebasing <em>onto</em> the <code>merge-base</code> revision of the original branch.</li>
<li>Manually replaying (or <em>picking</em>) the revisions from that branch via interactive rebase.</li>
</ul></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a></a><span class="fu">git</span> checkout main</span>
<span id="cb10-2"><a></a><span class="fu">git</span> fetch</span>
<span id="cb10-3"><a></a><span class="fu">git</span> checkout <span class="at">-b</span> 4310-scan_op</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="demo-branch-setup-option-2-2" class="slide level2">
<h2>Demo Branch Setup: Option 2 [2]</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a></a><span class="fu">git</span> rebase <span class="at">-i</span> 071f032f650002a5159e36d13b7549fe383a5c50</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>This brings up the interactive git command editor.</li>
<li>Delete all lines.</li>
<li>Paste the <code>gllmb</code> output from earlier.</li>
<li>Delete the trailing <code>%</code> and leading <code>% gmbll</code>.</li>
<li>Replace the <code>^*</code> with <code>pick</code>.</li>
<li>Reverse the order via <code>:%!tac</code> (<code>tac</code> = reverse cat)</li>
<li>Save and… voila!</li>
</ul>
</section>
<section id="section-1" class="slide level2" data-background-video="images/git-rebase-1.webm" data-background-size="contain" data-background-opacity="1">
<h2></h2>
</section></section>
<section>
<section id="the-interactive-rebase-workflow" class="title-slide slide level1 center">
<h1>The Interactive Rebase Workflow</h1>

</section>
<section id="overview" class="slide level2">
<h2>Overview</h2>
<ul>
<li>Stage 0: Backup</li>
<li>Stage 1: Git Reset Back to Merge Base</li>
<li>Stage 2: Git Add Interactive Loop</li>
<li>Stage 3: Fixing Stage 2 Mistakes With Interactive Rebase</li>
</ul>
</section>
<section id="stage-0-backup" class="slide level2">
<h2>Stage 0: Backup</h2>
<ul>
<li>You’ll eventually screw something up with interactive rebasing and will want all your original work preserved somewhere safe.</li>
<li>Thus: always make sure you have a backup of your messy WIP-commit branch pushed somewhere a) remote, and b) unrelated to your clean PR branch.</li>
<li>For me this usually entails:
<ul>
<li>Do my initial dev in <code>4310-scan_op</code>. Push to Github frequently.</li>
<li>When ready to clean everything up, create a new <code>-v2</code> branch from the initial dev branch (<code>4310-scan_op</code> in our case).</li>
</ul></li>
</ul>
</section>
<section id="stage-0-backup-cont." class="slide level2">
<h2>Stage 0: Backup (cont.)</h2>
<ul>
<li>We’ve already created the <code>4310-scan_op</code> branch, and it’s the active branch in our repo.</li>
<li>So from there, create a new <code>-v2</code> branch where we’ll do all our new work.</li>
<li>This is the branch from which you’ll eventually create the PR.</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a></a><span class="ex">%</span> git checkout <span class="at">-b</span> 4310-scan_op-v2</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="section-2" class="slide level2" data-background-image="images/create-v2-branch.jpg" data-background-opacity="1">
<h2></h2>
</section>
<section id="stage-1-git-reset-back-to-merge-base" class="slide level2">
<h2>Stage 1: Git Reset Back to Merge Base</h2>
<ul>
<li>We want to erase all of the commits in our v2 branch, but keep all the changes we made since we branched from <code>main</code>:
<ul>
<li><code>git reset $(gmb)</code></li>
</ul></li>
<li>This resets the index back to the merge base, but keeps all the changes you made locally.</li>
</ul>
</section>
<section id="section-3" class="slide level2" data-background-video="images/git-reset-gmb.webm">
<h2></h2>
</section>
<section id="stage-2-git-add-interactive-loop" class="slide level2">
<h2>Stage 2: Git Add Interactive Loop</h2>
<ul>
<li class="fragment">When you’re at this point of development, you generally have a reasonable idea of the changes you’ve made, and how you’d like to organize them in a cleaned-up PR.</li>
<li class="fragment">I usually have a mental list of categories that typically looks something like this:
<ul>
<li class="fragment">Cosmetic changes.</li>
<li class="fragment">Minor/unrelated/housekeeping changes.</li>
<li class="fragment">The main change, potentially broken up into multiple pieces.</li>
<li class="fragment">If I’m breaking an API, a commit that contains all the API updates.</li>
<li class="fragment">Any new or updated tests.</li>
</ul></li>
<li class="fragment">I don’t write down this list; too burdensome. Prefer to keep it loosey-goosey.</li>
</ul>
</section>
<section id="on-crafting-topical-commits" class="slide level2">
<h2>On Crafting Topical Commits</h2>
<ul>
<li class="fragment">I don’t ever focus on ensuring that each individual commit is well-formed (i.e.&nbsp;can be cleanly built/tested).
<ul>
<li class="fragment">When it <em>can</em> be done, the effort it takes will often dwarf the value provided.</li>
<li class="fragment">Sometimes it just can’t be done (i.e.&nbsp;if you want to refactor an API in one commit, and keep all the updates to existing code to a separate commit).</li>
</ul></li>
<li class="fragment">Primary goal is always to make the reviewer’s life easier.</li>
<li class="fragment">Remember, Github PR review UI allows a reviewer to advance commit-by-commit when reviewing your PR.</li>
<li class="fragment">So I prefer to use descriptive commit messages in order to tell a cumulative story.</li>
</ul>
</section>
<section id="cheating-for-the-sake-of-the-demo" class="slide level2">
<h2>Cheating For The Sake Of The Demo…</h2>
<ul>
<li>In this next section we’ll look at some real-life <code>git add -i</code> usage that simulates the workflow I’m proselytizing in this deck.</li>
<li>The demo is based off a real-life example, where the v2 branch’s PR was merged into CCCL here: <a href="https://github.com/NVIDIA/cccl/pull/4628">https://github.com/NVIDIA/cccl/pull/4628</a></li>
<li>Next slide will depict a screen capture of using the <code>git add -i</code> UI to replicate the first commit in that v2 branch.
<ul>
<li>Left terminal: git log of final v2 commits.</li>
<li>Right terminal: where I’ll do the <code>git add -i</code> work.</li>
</ul></li>
</ul>
</section>
<section id="section-4" class="slide level2" data-background-video="images/git-add-i.webm" data-background-size="contain">
<h2></h2>
</section>
<section id="side-bar-delta-pager" class="slide level2 scrollable">
<h2>Side-bar: Delta Pager</h2>
<ul>
<li>Forgot that I had this in my <code>~/.gitconfig</code> on <code>nv1</code>:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode numberSource ini number-lines code-with-copy"><code class="sourceCode ini"><span id="cb13-1"><a></a><span class="co"># sudo apt install -y git-delta</span></span>
<span id="cb13-2"><a></a><span class="co"># https://dandavison.github.io/delta/side-by-side-view.html</span></span>
<span id="cb13-3"><a></a></span>
<span id="cb13-4"><a></a><span class="kw">[core]</span></span>
<span id="cb13-5"><a></a><span class="dt">    </span><span class="co"># Comment out this next line to disable delta for e.g. `git show ...`</span></span>
<span id="cb13-6"><a></a><span class="dt">    pager </span><span class="ot">=</span><span class="st"> delta</span></span>
<span id="cb13-7"><a></a></span>
<span id="cb13-8"><a></a><span class="kw">[interactive]</span></span>
<span id="cb13-9"><a></a><span class="dt">    </span><span class="co"># Comment-out this next line to disable delta and go back to unified diffs.</span></span>
<span id="cb13-10"><a></a><span class="dt">    diffFilter </span><span class="ot">=</span><span class="st"> delta --color-only --features=interactive</span></span>
<span id="cb13-11"><a></a></span>
<span id="cb13-12"><a></a><span class="kw">[delta]</span></span>
<span id="cb13-13"><a></a><span class="dt">    features </span><span class="ot">=</span><span class="st"> decorations</span></span>
<span id="cb13-14"><a></a><span class="dt">    side-by-side </span><span class="ot">=</span><span class="st"> </span><span class="kw">true</span></span>
<span id="cb13-15"><a></a><span class="dt">    line-numbers-left-format </span><span class="ot">=</span><span class="st"> ""</span></span>
<span id="cb13-16"><a></a><span class="dt">    line-numbers-right-format </span><span class="ot">=</span><span class="st"> "│ "</span></span>
<span id="cb13-17"><a></a></span>
<span id="cb13-18"><a></a><span class="kw">[delta "interactive"]</span></span>
<span id="cb13-19"><a></a><span class="dt">    keep-plus-minus-markers </span><span class="ot">=</span><span class="st"> </span><span class="kw">false</span></span>
<span id="cb13-20"><a></a></span>
<span id="cb13-21"><a></a><span class="kw">[delta "decorations"]</span></span>
<span id="cb13-22"><a></a><span class="dt">    commit-decoration-style </span><span class="ot">=</span><span class="st"> blue ol</span></span>
<span id="cb13-23"><a></a><span class="dt">    commit-style </span><span class="ot">=</span><span class="st"> raw</span></span>
<span id="cb13-24"><a></a><span class="dt">    file-style </span><span class="ot">=</span><span class="st"> omit</span></span>
<span id="cb13-25"><a></a><span class="dt">    hunk-header-decoration-style </span><span class="ot">=</span><span class="st"> blue box</span></span>
<span id="cb13-26"><a></a><span class="dt">    hunk-header-file-style </span><span class="ot">=</span><span class="st"> red</span></span>
<span id="cb13-27"><a></a><span class="dt">    hunk-header-line-number-style </span><span class="ot">=</span><span class="st"> "#067a00"</span></span>
<span id="cb13-28"><a></a><span class="dt">    hunk-header-style </span><span class="ot">=</span><span class="st"> file line-number syntax</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="section-5" class="slide level2" data-background-video="images/git-delta.webm" data-background-size="contain">
<h2></h2>
</section>
<section id="git-add--i-5-patch" class="slide level2 smaller">
<h2><code>git add -i; 5: patch&gt;</code></h2>
<p><img data-src="images/git-add-i-5-patch.jpg" style="width:50.0%;height:50.0%"></p>
<ul>
<li>Prompt is very flexible, accepts input similar to <em>“Print Pages”</em>-type UIs.
<ol type="1">
<li><code>*</code> → Selects everything</li>
<li><code>1 5 10</code> → Selects 1, 5, and 10</li>
<li><code>1-5 7-8 10 12-13</code> → Selects 1-5 (e.g.&nbsp;1,2,3,4,5), 7-8, 10, 12-13</li>
<li><code>-5</code> → Unselects 5 (i.e.&nbsp;if added by mistake)</li>
<li><code>-*</code> → Unselects everything</li>
</ol></li>
<li>Press Enter (with no selection input) to enter interactive hunk selection mode.</li>
</ul>
</section>
<section id="section-6" class="slide level2" data-background-video="images/interactive-hunk-2.webm" data-background-size="contain">
<h2></h2>
</section>
<section id="interactive-hunk-selection" class="slide level2">
<h2>Interactive Hunk Selection</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a></a><span class="kw">(</span><span class="ex">1/1</span><span class="kw">)</span> <span class="ex">Stage</span> this hunk <span class="pp">[</span><span class="ss">y,n,q,a,d,s,e,?</span><span class="pp">]?</span> <span class="pp">?</span></span>
<span id="cb14-2"><a></a><span class="ex">y</span> <span class="at">-</span> stage this hunk</span>
<span id="cb14-3"><a></a><span class="ex">n</span> <span class="at">-</span> do not stage this hunk</span>
<span id="cb14-4"><a></a><span class="ex">q</span> <span class="at">-</span> quit<span class="kw">;</span> <span class="cf">do</span> <span class="ex">not</span> stage this hunk or any of the remaining ones</span>
<span id="cb14-5"><a></a><span class="ex">a</span> <span class="at">-</span> stage this hunk and all later hunks in the file</span>
<span id="cb14-6"><a></a><span class="ex">d</span> <span class="at">-</span> do not stage this hunk or any of the later hunks in the file</span>
<span id="cb14-7"><a></a><span class="ex">s</span> <span class="at">-</span> split the current hunk into smaller hunks</span>
<span id="cb14-8"><a></a><span class="ex">e</span> <span class="at">-</span> manually edit the current hunk</span>
<span id="cb14-9"><a></a><span class="ex">?</span> <span class="at">-</span> print help</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>I use <code>y</code>, <code>n</code>, and <code>q</code> frequently.</li>
<li>Infrequently: <code>a</code>, <code>d</code>, <code>s</code></li>
<li>Once in a blue moon: <code>e</code></li>
</ul>
</section>
<section id="interactive-hunk-selection-latest-git-version" class="slide level2">
<h2>Interactive Hunk Selection: Latest Git Version</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a></a><span class="kw">(</span><span class="ex">1/6</span><span class="kw">)</span> <span class="ex">Stage</span> this hunk <span class="pp">[</span><span class="ss">y,n,q,a,d,j,J,g,/,s,e,?</span><span class="pp">]?</span> <span class="pp">?</span></span>
<span id="cb15-2"><a></a><span class="ex">y</span> <span class="at">-</span> stage this hunk</span>
<span id="cb15-3"><a></a><span class="ex">n</span> <span class="at">-</span> do not stage this hunk</span>
<span id="cb15-4"><a></a><span class="ex">q</span> <span class="at">-</span> quit<span class="kw">;</span> <span class="cf">do</span> <span class="ex">not</span> stage this hunk or any of the remaining ones</span>
<span id="cb15-5"><a></a><span class="ex">a</span> <span class="at">-</span> stage this hunk and all later hunks in the file</span>
<span id="cb15-6"><a></a><span class="ex">d</span> <span class="at">-</span> do not stage this hunk or any of the later hunks in the file</span>
<span id="cb15-7"><a></a><span class="ex">j</span> <span class="at">-</span> leave this hunk undecided, see next undecided hunk              <span class="pp">***</span></span>
<span id="cb15-8"><a></a><span class="ex">J</span> <span class="at">-</span> leave this hunk undecided, see next hunk                        <span class="pp">***</span></span>
<span id="cb15-9"><a></a><span class="ex">g</span> <span class="at">-</span> select a hunk to go to                                          <span class="pp">***</span></span>
<span id="cb15-10"><a></a><span class="ex">/</span> <span class="at">-</span> search for a hunk matching the given regex                      <span class="pp">***</span></span>
<span id="cb15-11"><a></a><span class="ex">s</span> <span class="at">-</span> split the current hunk into smaller hunks</span>
<span id="cb15-12"><a></a><span class="ex">e</span> <span class="at">-</span> manually edit the current hunk</span>
<span id="cb15-13"><a></a><span class="ex">?</span> <span class="at">-</span> print help</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>New options annotated with <code>***</code></li>
<li>Haven’t personally used them.</li>
<li>(Literally only just noticed them by accident.)</li>
</ul>
</section>
<section id="interactive-hunk-selection-splitting" class="slide level2">
<h2>Interactive Hunk Selection: Splitting</h2>
<ul>
<li>Use case: you’re presented with a hunk.</li>
<li>But you only want to include some of the lines presented.</li>
<li><code>s</code>→ <em>split the current hunk into smaller hunks</em></li>
</ul>
</section>
<section id="section-7" class="slide level2" data-background-video="images/interactive-hunk-splitting.webm" data-background-size="contain">
<h2></h2>
</section>
<section id="interactive-hunk-selection-manually-edit" class="slide level2">
<h2>Interactive Hunk Selection: Manually Edit</h2>
<ul>
<li>Sometimes a hunk can’t be split into smaller hunks (e.g.&nbsp;if all lines in the hunk are contiguous).</li>
<li>But you can hack it manually via manual hunk editing.</li>
<li><code>e</code>→ <em>manually edit the current hunk</em>
<ul>
<li>To remove <code>'-'</code> lines, make them <code>' '</code> lines.</li>
<li>To remove <code>'+'</code> lines, delete them.</li>
</ul></li>
</ul>
</section>
<section id="section-8" class="slide level2" data-background-video="images/interactive-hunk-editing.webm" data-background-size="contain">
<h2></h2>
</section>
<section id="on-manually-editing-hunks" class="slide level2">
<h2>On Manually Editing Hunks</h2>
<ul>
<li>If the hunk doesn’t apply cleanly, the editor will open back up.</li>
<li>I’ve had this when trying to do convoluted additions/removals plus also editing existing code.</li>
<li>If I can’t get it working by hacking the hunk/patch… I’ll just go back to the source and make it reflect the exact change I want.
<ul>
<li>As everything is backed up (either via <code>git reflog</code> or the Stage 0 push to somewhere remote), there’s no risk of completely losing code.</li>
</ul></li>
</ul>
</section>
<section id="continuing-the-git-add-interactive-loop" class="slide level2">
<h2>Continuing The Git Add Interactive Loop</h2>
<ul>
<li class="fragment">I keep repeating the <code>git add -i</code>, <code>5&gt; patch</code>, <code>git commit</code> loop until finished.</li>
<li class="fragment">In a perfect world, I make no mistakes, and all my interactive adds are flawless.</li>
<li class="fragment">Reality: that’s never the case. I’ll always miss something, or want to include something in a prior commit, or need to rework something a bit more, or improve a comment, etc.</li>
</ul>
</section>
<section id="stage-3-fixing-inevitable-mistakes" class="slide level2">
<h2>Stage 3: Fixing Inevitable Mistakes</h2>
<ul>
<li>Having used SCCS, RCS, CVS, ClearCase, Subversion, then git, I can’t remember life before <code>git rebase -i $(gmb)</code>.
<ul>
<li><code>git rebase --interactive $(git merge-base HEAD origin main)</code></li>
<li><code>git rebase -i $(gmb)</code></li>
<li><code>alias grib='git rebase -i $(gmb)</code>’</li>
</ul></li>
<li>I’ll use <code>grib</code> to craft a git history that I can then use to demonstrate <code>grib</code>.</li>
</ul>
</section>
<section id="section-9" class="slide level2" data-background-video="images/grib-1.webm" data-background-size="contain">
<h2></h2>
</section>
<section id="the-fixup-commit" class="slide level2">
<h2>The Fixup Commit</h2>
<ul>
<li class="fragment">Scenario: you forgot to include something in a prior commit.</li>
<li class="fragment">If it was the last commit, you can fix easily enough with <code>git commit --amend</code>.</li>
<li class="fragment">If you’re like me, you only notice the issue after N+1 subsequent commits.</li>
<li class="fragment">Thus: we need to make a fixup commit!</li>
<li class="fragment">Literally: I make the fix, then <code>gc -m fixup</code>.</li>
<li class="fragment">Maybe <code>gc -m "fixup remove depfunc"</code> so I remember where to inject the fixup during rebase.</li>
<li class="fragment">Concrete example: I forgot the <code>N.B. Uncomment this to print ...</code> lines in the very first <code>git add -i</code> example.</li>
</ul>
</section>
<section id="section-10" class="slide level2" data-background-video="images/fixup-commit.webm" data-background-size="contain">
<h2></h2>
</section>
<section id="git-rebase-interactive-commands" class="slide level2">
<h2>Git Rebase Interactive Commands</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a></a><span class="co"># Commands:</span></span>
<span id="cb16-2"><a></a><span class="co"># p, pick &lt;commit&gt; = use commit</span></span>
<span id="cb16-3"><a></a><span class="co"># r, reword &lt;commit&gt; = use commit, but edit the commit message</span></span>
<span id="cb16-4"><a></a><span class="co"># e, edit &lt;commit&gt; = use commit, but stop for amending</span></span>
<span id="cb16-5"><a></a><span class="co"># s, squash &lt;commit&gt; = use commit, but meld into previous commit</span></span>
<span id="cb16-6"><a></a><span class="co"># f, fixup [-C | -c] &lt;commit&gt; = like "squash" but keep only the previous</span></span>
<span id="cb16-7"><a></a><span class="co">#                    commit's log message, unless -C is used, in which case</span></span>
<span id="cb16-8"><a></a><span class="co">#                    keep only this commit's message; -c is same as -C but</span></span>
<span id="cb16-9"><a></a><span class="co">#                    opens the editor</span></span>
<span id="cb16-10"><a></a><span class="co"># x, exec &lt;command&gt; = run command (the rest of the line) using shell</span></span>
<span id="cb16-11"><a></a><span class="co"># b, break = stop here (continue rebase later with 'git rebase --continue')</span></span>
<span id="cb16-12"><a></a><span class="co"># d, drop &lt;commit&gt; = remove commit</span></span>
<span id="cb16-13"><a></a><span class="co"># l, label &lt;label&gt; = label current HEAD with a name</span></span>
<span id="cb16-14"><a></a><span class="co"># t, reset &lt;label&gt; = reset HEAD to a label</span></span>
<span id="cb16-15"><a></a><span class="co"># m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]</span></span>
<span id="cb16-16"><a></a><span class="co">#         create a merge commit using the original merge commit's</span></span>
<span id="cb16-17"><a></a><span class="co">#         message (or the oneline, if no original merge commit was</span></span>
<span id="cb16-18"><a></a><span class="co">#         specified); use -c &lt;commit&gt; to reword the commit message</span></span>
<span id="cb16-19"><a></a><span class="co"># u, update-ref &lt;ref&gt; = track a placeholder for the &lt;ref&gt; to be updated</span></span>
<span id="cb16-20"><a></a><span class="co">#                       to this position in the new commits. The &lt;ref&gt; is</span></span>
<span id="cb16-21"><a></a><span class="co">#                       updated at the end of the rebase</span></span>
<span id="cb16-22"><a></a><span class="co">#</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="git-rebase-interactive-commands-cont.-1" class="slide level2">
<h2>Git Rebase Interactive Commands (cont.) [1]</h2>
<p>In order of how frequently I use them for every given PR…</p>
<ul>
<li class="fragment">Fixup
<ul>
<li class="fragment">I frequently use this for every PR.</li>
<li class="fragment">Melds the commit into the prior one; discards the commit message.</li>
<li class="fragment">Easy to cut-and-paste the <code>fixup</code> commit from the last command to wherever you want it injected.
<ul>
<li class="fragment">There are fancier auto-squash options, I’ve tried them, but I always end up just manually placing the <code>fixup</code> commit where I want it.</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="git-rebase-interactive-commands-cont.-2" class="slide level2">
<h2>Git Rebase Interactive Commands (cont.) [2]</h2>
<ul>
<li>Reword
<ul>
<li>I’ll maybe use this a few times per PR.</li>
<li>Allows you to reword the commit message.</li>
<li>Will drop you into your editor with the existing commit message, ready for you to edit.</li>
<li>Make your changes, save and exit, and voila, new commit message, rebase continues.</li>
</ul></li>
</ul>
</section>
<section id="git-rebase-interactive-commands-cont.-2-1" class="slide level2">
<h2>Git Rebase Interactive Commands (cont.) [2]</h2>
<ul>
<li>Edit
<ul>
<li>I’ll maybe use this once or twice per complex PR.</li>
<li>Drops you into a prompt after applying the commit and allows you to do anything you want.</li>
<li>Handy for removing code you accidentally added.</li>
<li>But you can literally do anything; git add, rm etc.</li>
<li>Once you’ve finished your changes, you need to commit. Two options:
<ul>
<li><code>git commit</code>: inject a new commit.</li>
<li><code>git commit --amend</code>: meld your changes into the prior commit.</li>
</ul></li>
<li>After committing, you need to <code>git rebase --continue</code>.</li>
</ul></li>
</ul>
</section>
<section id="edit-example" class="slide level2">
<h2>Edit Example</h2>
<ul>
<li>That first commit was a bit hacky, we combined two completely unrelated things into a single commit.</li>
<li>Let’s break it back out into two separate commits via <code>edit</code>.</li>
</ul>
</section>
<section id="section-11" class="slide level2" data-background-video="images/edit-example.webm" data-background-size="contain">
<h2></h2>
</section>
<section id="advanced-fu-with-exec" class="slide level2">
<h2>Advanced-Fu with Exec</h2>
<ul>
<li>Bulk commit message changes.
<ul>
<li><code>2,$ s/^pick/exec git commit --amend --no-edit -m "$(git show -s --format=%B | sed 's\/^MINOR: \/\/')"\rpick/</code></li>
</ul></li>
<li>Changing authors.
<ul>
<li><code>exec git commit --amend --no-edit --author="Dave Cutler &lt;davec@microsoft.com&gt;"</code></li>
</ul></li>
<li>Adding co-authors.
<ul>
<li><code>exec git commit --amend --no-edit -m "$(git show -s --format=%B)$(echo; echo 'Co-authored-by: Linus Torvalds [linus@linuxfoundation.org](mailto:linus@linuxfoundation.org)')"</code></li>
</ul></li>
</ul>
</section>
<section id="section-12" class="slide level2" data-background-video="images/advanced-exec.webm" data-background-size="contain">
<h2></h2>
</section></section>
<section>
<section id="conclusion" class="title-slide slide level1 center">
<h1>Conclusion</h1>

</section>
<section id="other-recommendations" class="slide level2">
<h2>Other Recommendations</h2>
<ul>
<li>Never merge! Always <code>git pull --rebase</code>. Or <code>gpr</code> alias.</li>
<li>Want to <em>“sync”</em> with <code>main</code>? <code>git pull --rebase origin main</code> (or <code>gprom</code>).</li>
<li>After rebasing you’ll need to <code>git push --force-with-lease</code> (or <code>gpfwl</code>).</li>
<li>Once you’ve created the PR… do you address feedback via explicit commits, or fixups against original commits?
<ul>
<li>I use both depending on… no concrete set of rules.</li>
</ul></li>
<li>And remember: there’s always <code>git reflog</code> if you really eff things up.</li>
</ul>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="../../static/images/nvidia-logo.png" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-bg-video-ctrl/bg-video-ctrl.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': false,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: '75%',

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, RevealBgVideoCtrl, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/trent\.me");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    <input type="hidden" id="giscus-base-theme" value="dark">
    <input type="hidden" id="giscus-alt-theme" value="dark">
    <script>
      function loadGiscus() {
        // Function to get the theme based on body class
        const getTheme = () => {
          let baseTheme = document.getElementById('giscus-base-theme').value;
          let altTheme = document.getElementById('giscus-alt-theme').value;
          return document.body.classList.contains('quarto-dark') ? altTheme : baseTheme;
        };
        const script = document.createElement("script");
        script.src = "https://giscus.app/client.js";
        script.async = true;
        script.dataset.repo = "tpn/website";
        script.dataset.repoId = "MDEwOlJlcG9zaXRvcnkxMjg2ODc3NTQ=";
        script.dataset.category = "Announcements";
        script.dataset.categoryId = "DIC_kwDOB6ueis4Cj53i";
        script.dataset.mapping = "pathname";
        script.dataset.reactionsEnabled = "1";
        script.dataset.emitMetadata = "0";
        script.dataset.inputPosition = "top";
        script.dataset.theme = getTheme();
        script.dataset.lang = "en";
        script.crossOrigin = "anonymous";
        // Append the script to the desired div instead of at the end of the body
        document.getElementById("quarto-content").appendChild(script);
      }
      loadGiscus();
    </script>
    

</body></html>